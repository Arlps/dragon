<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>



	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>

	<title>jQuery treeview</title>

	

	<link rel="stylesheet" href="../jquery.treeview.css" />
    <!-- <link rel="stylesheet" href="../red-treeview.css" /> -->
	<!-- <link rel="stylesheet" href="screen.css" /> -->
	
	<script src="../lib/jquery.js" type="text/javascript"></script>

	<script src="../jquery.treeview.js" type="text/javascript"></script>
</head>
<body>

	<ul id="navigation">

		<li><a href="?1">Item 1</a>

			<ul>

				<li><a href="?1.0">Item 1.0</a>

					<ul>

						<li><a href="?1.0.0">Item 1.0.0</a></li>

					</ul>

				</li>

				<li><a href="?1.1">Item 1.1</a></li>

				<li><a href="?1.2">Item 1.2</a>

					<ul>

						<li><a href="?1.2.0">Item 1.2.0</a>

						<ul>

							<li><a href="?1.2.0.0">Item 1.2.0.0</a></li>

							<li><a href="?1.2.0.1">Item 1.2.0.1</a></li>

							<li><a href="?1.2.0.2">Item 1.2.0.2</a></li>

						</ul>

					</li>

						<li><a href="?1.2.1">Item 1.2.1</a>

						<ul>

							<li><a href="?1.2.1.0">Item 1.2.1.0</a></li>

						</ul>

					</li>

						<li><a href="?1.2.2">Item 1.2.2</a>

						<ul>

							<li><a href="?1.2.2.0">Item 1.2.2.0</a></li>

							<li><a href="?1.2.2.1">Item 1.2.2.1</a></li>

							<li><a href="?1.2.2.2">Item 1.2.2.2</a></li>

						</ul>

					</li>

					</ul>

				</li>

			</ul>

		</li>

		<li><a href="?2">Item 2</a>

			<ul>

				<li><span>Item 2.0</span>

					<ul>

						<li><a href="?2.0.0">Item 2.0.0</a>

						<ul>

							<li><a href="?2.0.0.0">Item 2.0.0.0</a></li>

							<li><a href="?2.0.0.1">Item 2.0.0.1</a></li>

						</ul>

					</li>

					</ul>

				</li>

				<li><a href="?2.1">Item 2.1</a>

					<ul>

						<li><a href="?2.1.0">Item 2.1.0</a>

						<ul>

							<li><a href="?2.1.0.0">Item 2.1.0.0</a></li>

						</ul>

					</li>

						<li><a href="?2.1.1">Item 2.1.1</a>

						<ul>

							<li><a href="?2.1.1.0abc">Item 2.1.1.0</a></li>

							<li><a href="?2.1.1.1">Item 2.1.1.1</a></li>

							<li><a href="?2.1.1.2">Item 2.1.1.2</a></li>

						</ul>

					</li>

						<li><a href="?2.1.2">Item 2.1.2</a>

						<ul>

							<li><a href="?2.1.2.0">Item 2.1.2.0</a></li>

							<li><a href="?2.1.2.1">Item 2.1.2.1</a></li>

							<li><a href="?2.1.2.2">Item 2.1.2.2</a></li>

						</ul>

					</li>

					</ul>

				</li>

			</ul>

		</li>

		<li><a href="?3">Item 3</a>

			<ul>

				<li class="open"><a href="?3.0">Item 3.0</a>

					<ul>

						<li><a href="?3.0.0">Item 3.0.0</a></li>

						<li><a href="?3.0.1">Item 3.0.1</a>

							<ul>

								<li><a href="?3.0.1.0">Item 3.0.1.0</a></li>

								<li><a href="?3.0.1.1">Item 3.0.1.1</a></li>

							</ul>

						</li>

						<li><a href="?3.0.2">Item 3.0.2</a>

							<ul>

								<li><a href="?3.0.2.0">Item 3.0.2.0</a></li>

								<li><a href="?3.0.2.1">Item 3.0.2.1</a></li>

								<li><a href="?3.0.2.2">Item 3.0.2.2</a></li>

							</ul>

						</li>

					</ul>

				</li>

			</ul>

		</li>

	</ul>
	<script>
		$("#navigation").treeview({
			persist: "location",
			collapsed: true,
			unique: true
		});
	</script>

	<div id="json-list"></div>

	<!-- <button id="btn_bianli">bulkid</button>
	<div id="div_menu"></div> -->
<script>
	
	$(function(){
		var data={ name:0,son:[]};
		bulidData(data)
		function bulidData(data){
			for (var i = 0; i < 4; i++) {
				data.son.push({
					name:'1.'+(i+1),
					son:[]
				});
				for (var j = 0; j < 5; j++) {
					data.son[i].son.push({
						name:'1.'+(i+1)+'.'+(j+1),
						son:[]
					});
				};
			};
		}
		console.log(data)
		var json={
			name:0,
			son:[{
				name:'1.1',
			},{
				name:'1.2',
				son:[{
					name:'1.2.1'
				}]
			},{
				name:'1.3',
			}]
		}
 // var json2={ "son": [
 // { "MID": "M001", "name": "首页", "Url": "#", "son": "" },
 // { "MID": "M002", "name": "车辆买卖", "Url": "#", "son": [
 // 	{ "MID": "M003", "name": "新车", "Url": "#", "son": 
 // 		[{ "MID": "M006", "name": "奥迪", "Url": "#", "son": "" }, { "MID": "M007", "name": "别克", "Url": "#", "son": "" }] 
 // 	}, 
 // 	{ "MID": "M004", "name": "二手车", "Url": "#", "son": "" }, 
 // 	{ "MID": "M005", "name": "改装车", "Url": "#", "son": "" } 
 // ]}, 
 // { "MID": "M006", "name": "宠物", "Url": "#", "son": "" } 

 // ] };

	
		var ulbox = $("<ul></ul>");
		buildTree(data.son, ulbox);
		$("#json-list").append(ulbox);

		
		$("#json-list").treeview({
			persist: "location",
			collapsed: true,
			unique: true
		});
	})

	function buildTree(son, parent) {
		for(var menu in son) {
			//如果有子节点，则遍历该子节点
			if(son[menu].son!=undefined &&son[menu].son.length>0) {//son[menu].son.length > 0
				console.log(son[menu].son)
				//创建一个子节点li
				var li = $("<li></li>");
				//将li的文本设置好，并马上添加一个空白的ul子节点，并且将这个li添加到父亲节点中
				$(li).append(son[menu].name).append("<ul></ul>").appendTo(parent);
				//将空白的ul作为下一个递归遍历的父亲节点传入
				buildTree(son[menu].son, $(li).children().eq(0));
			}
			//如果该节点没有子节点，则直接将该节点li以及文本创建好直接添加到父亲节点中
			else {
				$("<li></li>").append(son[menu].name).appendTo(parent);
			}
		}
	}
</script>

<script>
	<!--json  Data-->
	var menulist = {
		"menulist": [{
				"MID": "M001",
				"MName": "首页",
				"Url": "#",
				"menulist": ""
			},
			{
				"MID": "M002",
				"MName": "车辆买卖",
				"Url": "#",
				"menulist": [{
						"MID": "M003",
						"MName": "新车",
						"Url": "#",
						"menulist": [{
								"MID": "M006",
								"MName": "奥迪",
								"Url": "#",
								"menulist": ""
							},
							{
								"MID": "M007",
								"MName": "别克",
								"Url": "#",
								"menulist": ""
							}
						]
					},
					{
						"MID": "M004",
						"MName": "二手车",
						"Url": "#",
						"menulist": ""
					},
					{
						"MID": "M005",
						"MName": "改装车",
						"Url": "#",
						"menulist": ""
					}
				]
			},
			{
				"MID": "M006",
				"MName": "宠物",
				"Url": "#",
				"menulist": ""
			}
		]
	};

	<!--js  Code-->
	$(function() {
		// $("#btn_bianli").click(function() {
		// 	var showlist = $("<ul></ul>");
		// 	showall(menulist.menulist, showlist);
		// 	$("#div_menu").append(showlist);
		// 	$("#div_menu").appendTo($('body'))
		// 	$("#div_menu>ul").treeview({
		// 		persist: "location",
		// 		collapsed: true,
		// 		unique: true
		// 	});
		// });
	});

	//menu_list为json数据
	//parent为要组合成html的容器
	function showall(menu_list, parent) {
		// for(var menu in menu_list) {
		// 	//如果有子节点，则遍历该子节点
		// 	if(menu_list[menu].menulist.length > 0) {
		// 		//创建一个子节点li
		// 		var li = $("<li></li>");
		// 		//将li的文本设置好，并马上添加一个空白的ul子节点，并且将这个li添加到父亲节点中
		// 		$(li).append(menu_list[menu].MName).append("<ul></ul>").appendTo(parent);
		// 		//将空白的ul作为下一个递归遍历的父亲节点传入
		// 		showall(menu_list[menu].menulist, $(li).children().eq(0));
		// 	}
		// 	//如果该节点没有子节点，则直接将该节点li以及文本创建好直接添加到父亲节点中
		// 	else {
		// 		$("<li></li>").append(menu_list[menu].MName).appendTo(parent);
		// 	}
		// }
	}
</script>
</body>