<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="js/jquery-1.4.4.min.js"></script>
</head>
<body>
    <script>
        var data =[
            { id:1, pid:0, name:"AAAAAAA"},
            { id:11, pid:1, name:"叶子节点 - 1"},
            { id:12, pid:1, name:"叶子节点 - 2"},
            { id:13, pid:1, name:"叶子节点 - 3"},
            { id:2, pid:0, name:"BBBBBBB"},
            { id:21, pid:2, name:"叶子节点2 - 1"},
            { id:22, pid:2, name:"叶子节点2 - 2"},
            { id:23, pid:2, name:"叶子节点2 - 3"},
            { id:3, pid:0, name:"CCCCCCCC" },
            { id:31, pid:3, name:"叶子节点3 - 1"},
            { id:32, pid:3, name:"叶子节点3 - 2"},
            { id:33, pid:3, name:"叶子节点3 - 3"}
        ];
        var arr=[{
            id:0,
            name:'all',
            children:[]
        }];
        pidToTree(arr[0].children,data,0)
        function pidToTree(arr,data,num){
            for (var i = 0; i < data.length; i++) {
                if(data[i].pid==num){
                    var brr=[];
                    arr.push({
                        id:data[i].id,
                        name:data[i].name,
                        children:brr
                    })
                    pidToTree(brr,data,data[i].id)
                }
            };
            console.log(arr)
            return arr;
        }

    </script>
</body>
</html>